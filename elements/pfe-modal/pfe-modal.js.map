{"version":3,"file":"pfe-modal.js","sources":["pfe-modal.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeModal 1.0.0-prerelease.24\n * @license\n * Copyright 2019 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../pfelement/pfelement.js\";\n\n// StartsWith polyfill\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function(searchString, position){\n    return this.substr(position || 0, searchString.length) === searchString;\n};\n}\n\nclass PfeModal extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.24\";\n  }\n\n  get html() {\n    return `<style>:host{--pfe-modal--MaxWidth:70vw;--pfe-modal--MinWidth:50vw;--pfe-modal--MaxWidth--mobile:94vw;--pfe-modal--MaxHeight:90vh;--pfe-modal--Padding:calc(var(--pfe-theme--container-padding, 1rem) * 2) calc(var(--pfe-theme--container-padding, 1rem) * 3.5) calc(var(--pfe-theme--container-padding, 1rem) * 2) calc(var(--pfe-theme--container-padding, 1rem) * 2);--pfe-modal__overlay--BackgroundColor:var(--pfe-theme--color--overlay, rgba(45, 45, 45, 0.5));--pfe-modal__close--size:calc(var(--pfe-theme--ui--element--size, 20px) - 4px);display:block;position:relative}@media screen and (max-height:640px){:host{--pfe-modal--Padding:0 0 0 calc(var(--pfe-theme--container-padding, 1rem) * 2)}}.pfe-modal__outer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;height:100%;width:100%;top:0;left:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;z-index:99;z-index:var(--pfe-theme--zindex--modal,99)}.pfe-modal__outer[hidden]{display:none}.pfe-modal__overlay{position:fixed;height:100%;width:100%;top:0;left:0;background-color:var(--pfe-modal__overlay--BackgroundColor);cursor:pointer}.pfe-modal__overlay[hidden]{display:none}.pfe-modal__window{position:relative;max-width:var(--pfe-modal--MaxWidth--mobile);min-width:var(--pfe-modal--MinWidth);max-height:var(--pfe-modal--MaxHeight);margin:0 auto;-webkit-box-shadow:0 .1875rem .4375rem .1875rem rgba(#131313,.13),0 .6875rem 1.5rem 1rem rgba(#131313,.12);box-shadow:0 .1875rem .4375rem .1875rem rgba(#131313,.13),0 .6875rem 1.5rem 1rem rgba(#131313,.12);-webkit-box-shadow:var(--pfe-theme--box-shadow--lg,0 .1875rem .4375rem .1875rem rgba(#131313,.13),0 .6875rem 1.5rem 1rem rgba(#131313,.12));box-shadow:var(--pfe-theme--box-shadow--lg,0 .1875rem .4375rem .1875rem rgba(#131313,.13),0 .6875rem 1.5rem 1rem rgba(#131313,.12));background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);border-radius:2px;border-radius:var(--pfe-theme--ui--border-radius,2px)}@media screen and (min-width:640px){.pfe-modal__window{max-width:var(--pfe-modal--MaxWidth)}}.pfe-modal__container{position:relative;max-height:inherit}.pfe-modal__container[hidden]{display:none}.pfe-modal__content{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:var(--pfe-modal--MaxHeight);padding:var(--pfe-modal--Padding);-webkit-box-sizing:border-box;box-sizing:border-box}@media screen and (max-height:640px){.pfe-modal__content{--pfe-modal--Padding:var(--pfe-theme--container-padding, 1rem) calc(var(--pfe-theme--container-padding, 1rem) * 3) var(--pfe-theme--container-padding, 1rem) var(--pfe-theme--container-padding, 1rem)}}:host(:not([has_header])) .pfe-modal__content ::slotted(:nth-child(1)),:host(:not([has_header])) .pfe-modal__content ::slotted(:nth-child(2)){margin-top:0!important}.pfe-modal__content ::slotted([slot=pfe-modal--header]){margin-top:0!important}.pfe-modal__close{background-color:transparent;border:none;margin:0;padding:0;position:absolute;top:calc(1rem * .25);top:calc(var(--pfe-theme--container-padding,1rem) * .25);right:calc(1rem * .25);right:calc(var(--pfe-theme--container-padding,1rem) * .25);cursor:pointer;line-height:.5;padding:1rem;padding:var(--pfe-theme--container-padding,1rem)}@media screen and (min-width:640px){.pfe-modal__close{top:1rem;top:var(--pfe-theme--container-padding,1rem);right:1rem;right:var(--pfe-theme--container-padding,1rem)}}@media screen and (max-height:640px) and (min-width:640px){.pfe-modal__close{top:calc(1rem / 2);top:calc(var(--pfe-theme--container-padding,1rem)/ 2);right:calc(1rem / 2);right:calc(var(--pfe-theme--container-padding,1rem)/ 2)}}.pfe-modal__close>svg{fill:var(--pfe-broadcasted--text);height:20px;height:var(--pfe-theme--ui--element--size,20px);width:20px;width:var(--pfe-theme--ui--element--size,20px);height:var(--pfe-modal__close--size);width:var(--pfe-modal__close--size)}</style><slot name=\"pfe-modal--trigger\"></slot>\n<section class=\"pfe-modal__outer\" hidden>\n\t<div class=\"pfe-modal__overlay\"></div>\n\t<div class=\"pfe-modal__window\" tabindex=\"0\" role=\"dialog\" hidden>\n\t\t<div class=\"pfe-modal__container\">\n\t\t\t<div class=\"pfe-modal__content\">\n\t\t\t\t<slot name=\"pfe-modal--header\"></slot>\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t\t<button class=\"pfe-modal__close\" aria-label=\"Close dialog\">\n\t\t\t\t<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"32\" height=\"32\" viewBox=\"-11 11 22 23\">\n\t\t\t\t\t<path d=\"M30 16.669v-1.331c0-0.363-0.131-0.675-0.394-0.938s-0.575-0.394-0.938-0.394h-10.669v-10.65c0-0.362-0.131-0.675-0.394-0.938s-0.575-0.394-0.938-0.394h-1.331c-0.363 0-0.675 0.131-0.938 0.394s-0.394 0.575-0.394 0.938v10.644h-10.675c-0.362 0-0.675 0.131-0.938 0.394s-0.394 0.575-0.394 0.938v1.331c0 0.363 0.131 0.675 0.394 0.938s0.575 0.394 0.938 0.394h10.669v10.644c0 0.363 0.131 0.675 0.394 0.938 0.262 0.262 0.575 0.394 0.938 0.394h1.331c0.363 0 0.675-0.131 0.938-0.394s0.394-0.575 0.394-0.938v-10.637h10.669c0.363 0 0.675-0.131 0.938-0.394 0.269-0.262 0.4-0.575 0.4-0.938z\" transform=\"rotate(45)\"/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</section>`;\n  }\n\n  static get properties() {\n    return {};\n  }\n\n  static get slots() {\n    return {\"trigger\":{\"title\":\"Trigger\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}},\"header\":{\"title\":\"Header\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}},\"body\":{\"title\":\"Body\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-modal\";\n  }\n\n  get templateUrl() {\n    return \"pfe-modal.html\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-modal.json\";\n  }\n\n  get styleUrl() {\n    return \"pfe-modal.scss\";\n  }\n\n  // Declare the type of this component\n  static get PfeType() {\n    return PFElement.PfeTypes.Container;\n  }\n\n  constructor() {\n    super(PfeModal, { type: PfeModal.PfeType });\n\n    this.header_id = this.randomId;\n    this.isOpen = false;\n\n    this._keydownHandler = this._keydownHandler.bind(this);\n    this.toggle = this.toggle.bind(this);\n\n    // These fire custom events\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n\n    this._modalWindow = this.shadowRoot.querySelector(`.${this.tag}__window`);\n    this._modalCloseButton = this.shadowRoot.querySelector(`.${this.tag}__close`);\n    this._overlay = this.shadowRoot.querySelector(`.${this.tag}__overlay`);\n    this._container = this.shadowRoot.querySelector(`.${this.tag}__container`);\n    this._outer = this.shadowRoot.querySelector(`.${this.tag}__outer`);\n\n    this._observer = new MutationObserver(() => {\n      this._mapSchemaToSlots(this.tag, this.slots);\n      this._init();\n    });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._init();\n\n    this.addEventListener(\"keydown\", this._keydownHandler);\n    this._modalCloseButton.addEventListener(\"keydown\", this._keydownHandler);\n    this._modalCloseButton.addEventListener(\"click\", this.close);\n    this._overlay.addEventListener(\"click\", this.close);\n\n    this._observer.observe(this, { childList: true });\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"keydown\", this._keydownHandler);\n    this._modalCloseButton.removeEventListener(\"click\", this.close);\n    this._modalCloseButton.removeEventListener(\"click\", this.close);\n    this._overlay.removeEventListener(\"click\", this.close);\n\n    if (this.trigger) {\n      this.trigger.removeEventListener(\"click\", this.open);\n    }\n\n    this._observer.disconnect();\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback(attr, oldVal, newVal);\n  }\n\n  _init() {\n    this.trigger = this.querySelector(`[slot=\"pfe-modal--trigger\"]`);\n    this.header = this.querySelector(`[slot=\"pfe-modal--header\"]`);\n    this.body = [...this.querySelectorAll(`*:not([slot])`)];\n\n    if (this.trigger) {\n      this.trigger.addEventListener(\"click\", this.open);\n    }\n\n    if (this.header) {\n      this.header.setAttribute(\"id\", this.header_id);\n      this._modalWindow.setAttribute(\"aria-labelledby\", this.header_id);\n    } else {\n      // Get the first heading in the modal if it exists\n      const headings = this.body.filter(el => el.tagName.startsWith(\"H\"));\n      if (headings.length > 0) {\n        headings[0].setAttribute(\"id\", this.header_id);\n        this._modalWindow.setAttribute(\"aria-labelledby\", this.header_id);\n      } else if (this.trigger) {\n        this._modalWindow.setAttribute(\"aria-label\", this.trigger.innerText);\n      }\n    }\n  }\n\n  _keydownHandler(event) {\n    let target = event.target || window.event.srcElement;\n    let key = event.key || event.keyCode;\n    switch (key) {\n      case \"Tab\":\n      case 9:\n        if (target === this._modalCloseButton) {\n          event.preventDefault();\n          this._modalWindow.focus();\n        }\n        return;\n      case \"Escape\":\n      case \"Esc\":\n      case 27:\n        this.close(event);\n        return;\n      case \"Enter\":\n      case 13:\n          if (target === this.trigger) {\n            this.open(event);\n          }\n          return;\n    }\n  }\n\n  toggle(event) {\n    this.isOpen ? this.close(event) : this.open(event);\n    return this;\n  }\n\n  open(event) {\n    if (event) {\n      event.preventDefault();\n      this.trigger = event ? event.target : window.event.srcElement;\n    }\n\n    const detail = {\n      open: true\n    };\n\n    if (event && this.trigger) {\n      detail.trigger = this.trigger;\n    }\n\n    this.isOpen = true;\n    // Reveal the container and overlay\n    this._modalWindow.removeAttribute(\"hidden\");\n    this._overlay.removeAttribute(\"hidden\");\n    this._outer.removeAttribute(\"hidden\");\n    // This prevents background scroll\n    document.body.style.overflow = \"hidden\";\n    // Set the focus to the container\n    this._modalWindow.focus();\n\n    this.dispatchEvent(\n      new CustomEvent(`${this.tag}:open`, {\n        detail: detail,\n        bubbles: true\n      })\n    );\n\n    return this;\n  }\n\n  close(event) {\n    if (event) {\n      event.preventDefault();\n    }\n\n    this.isOpen = false;\n    // Hide the container and overlay\n    this._modalWindow.setAttribute(\"hidden\", true);\n    this._overlay.setAttribute(\"hidden\", true);\n    this._outer.setAttribute(\"hidden\", true);\n    // Return scrollability\n    document.body.style.overflow = \"auto\";\n\n    if (this.trigger) {\n      // Move focus back to the trigger element\n      this.trigger.focus();\n      this.trigger = null;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent(`${this.tag}:close`, {\n        detail: {\n          open: false\n        },\n        bubbles: true\n      })\n    );\n\n    return this;\n  }\n}\n\nPFElement.create(PfeModal);\n\nexport default PfeModal;\n"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,AAEA;;AAEA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,EAAE;EAChC,MAAM,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,YAAY,EAAE,QAAQ,CAAC;IAC5D,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,KAAK,YAAY,CAAC;CAC3E,CAAC;CACD;;AAED,MAAM,QAAQ,SAAS,SAAS,CAAC;EAC/B,WAAW,OAAO,GAAG;IACnB,OAAO,qBAAqB,CAAC;GAC9B;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,CAAC;;;;;;;;;;;;;;;;UAgBF,CAAC,CAAC;GACT;;EAED,WAAW,UAAU,GAAG;IACtB,OAAO,EAAE,CAAC;GACX;;EAED,WAAW,KAAK,GAAG;IACjB,OAAO,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;GACtS;EACD,WAAW,GAAG,GAAG;IACf,OAAO,WAAW,CAAC;GACpB;;EAED,IAAI,WAAW,GAAG;IAChB,OAAO,gBAAgB,CAAC;GACzB;;EAED,IAAI,SAAS,GAAG;IACd,OAAO,gBAAgB,CAAC;GACzB;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,gBAAgB,CAAC;GACzB;;;EAGD,WAAW,OAAO,GAAG;IACnB,OAAO,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC;GACrC;;EAED,WAAW,GAAG;IACZ,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;;IAE5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC/B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;IAEpB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;;IAGrC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAEnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC1E,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;IAC9E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;IACvE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;IAC3E,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;;IAEnE,IAAI,CAAC,SAAS,GAAG,IAAI,gBAAgB,CAAC,MAAM;MAC1C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;MAC7C,IAAI,CAAC,KAAK,EAAE,CAAC;KACd,CAAC,CAAC;GACJ;;EAED,iBAAiB,GAAG;IAClB,KAAK,CAAC,iBAAiB,EAAE,CAAC;;IAE1B,IAAI,CAAC,KAAK,EAAE,CAAC;;IAEb,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IACvD,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IACzE,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IAC7D,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;;IAEpD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;GACnD;;EAED,oBAAoB,GAAG;IACrB,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IAC1D,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IAChE,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IAChE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;;IAEvD,IAAI,IAAI,CAAC,OAAO,EAAE;MAChB,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KACtD;;IAED,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC;GAC7B;;EAED,wBAAwB,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE;IAC7C,KAAK,CAAC,wBAAwB,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;GACtD;;EAED,KAAK,GAAG;IACN,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;IACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;IAC/D,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;IAExD,IAAI,IAAI,CAAC,OAAO,EAAE;MAChB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KACnD;;IAED,IAAI,IAAI,CAAC,MAAM,EAAE;MACf,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;MAC/C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;KACnE,MAAM;;MAEL,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;MACpE,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;QACvB,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAC/C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;OACnE,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;QACvB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;OACtE;KACF;GACF;;EAED,eAAe,CAAC,KAAK,EAAE;IACrB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC;IACrD,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC;IACrC,QAAQ,GAAG;MACT,KAAK,KAAK,CAAC;MACX,KAAK,CAAC;QACJ,IAAI,MAAM,KAAK,IAAI,CAAC,iBAAiB,EAAE;UACrC,KAAK,CAAC,cAAc,EAAE,CAAC;UACvB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;SAC3B;QACD,OAAO;MACT,KAAK,QAAQ,CAAC;MACd,KAAK,KAAK,CAAC;MACX,KAAK,EAAE;QACL,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAClB,OAAO;MACT,KAAK,OAAO,CAAC;MACb,KAAK,EAAE;UACH,IAAI,MAAM,KAAK,IAAI,CAAC,OAAO,EAAE;YAC3B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;WAClB;UACD,OAAO;KACZ;GACF;;EAED,MAAM,CAAC,KAAK,EAAE;IACZ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnD,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,CAAC,KAAK,EAAE;IACV,IAAI,KAAK,EAAE;MACT,KAAK,CAAC,cAAc,EAAE,CAAC;MACvB,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC;KAC/D;;IAED,MAAM,MAAM,GAAG;MACb,IAAI,EAAE,IAAI;KACX,CAAC;;IAEF,IAAI,KAAK,IAAI,IAAI,CAAC,OAAO,EAAE;MACzB,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;KAC/B;;IAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;IAEnB,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IAC5C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IACxC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;;IAEtC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;;IAExC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;;IAE1B,IAAI,CAAC,aAAa;MAChB,IAAI,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;QAClC,MAAM,EAAE,MAAM;QACd,OAAO,EAAE,IAAI;OACd,CAAC;KACH,CAAC;;IAEF,OAAO,IAAI,CAAC;GACb;;EAED,KAAK,CAAC,KAAK,EAAE;IACX,IAAI,KAAK,EAAE;MACT,KAAK,CAAC,cAAc,EAAE,CAAC;KACxB;;IAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;IAEpB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IAC/C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IAC3C,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;;IAEzC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC;;IAEtC,IAAI,IAAI,CAAC,OAAO,EAAE;;MAEhB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;MACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACrB;;IAED,IAAI,CAAC,aAAa;MAChB,IAAI,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QACnC,MAAM,EAAE;UACN,IAAI,EAAE,KAAK;SACZ;QACD,OAAO,EAAE,IAAI;OACd,CAAC;KACH,CAAC;;IAEF,OAAO,IAAI,CAAC;GACb;CACF;;AAED,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;;;;"}