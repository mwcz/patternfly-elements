!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("../pfelement/pfelement.umd.min")):"function"==typeof define&&define.amd?define(["exports","../pfelement/pfelement.umd.min"],t):t(e.PfeCollapse={},e.PFElement)}(this,function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:r(a,t,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(){return Math.random().toString(36).substr(2,9)}var c=(a(d,t),n(d,[{key:"html",get:function(){return"<style>:host{display:block;cursor:default}</style><slot></slot>"}},{key:"templateUrl",get:function(){return"pfe-collapse-toggle.html"}},{key:"styleUrl",get:function(){return"pfe-collapse-toggle.scss"}},{key:"pfeId",get:function(){return this.getAttribute("pfe-id")},set:function(e){e&&this.setAttribute("pfe-id",e)}},{key:"expanded",get:function(){return"true"===this.getAttribute("aria-expanded")},set:function(e){var t=Boolean(e);this.setAttribute("aria-expanded",t)}}],[{key:"version",get:function(){return"1.0.0-prerelease.24"}},{key:"properties",get:function(){return{}}},{key:"slots",get:function(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function(){return"pfe-collapse-toggle"}},{key:"observedAttributes",get:function(){return["aria-controls"]}}]),n(d,[{key:"connectedCallback",value:function(){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"connectedCallback",this).call(this),this.expanded=!1,this.id&&(this.pfeId=this.id);var e=d.tag+"-"+o();this.id||(this.id=e),this.pfeId||(this.pfeId=e),this.setAttribute("role","button"),this._setTabIndex&&this.setAttribute("tabindex",0),this.controlledPanel||this._connectPanel(this.getAttribute("aria-controls"))}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._clickHandler),this._addKeydownHandler&&this.removeEventListener("keydown",this._keydownHandler)}},{key:"attributeChangedCallback",value:function(e,t,n){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"attributeChangedCallback",this).call(this,e,t,n),n&&this._connectPanel(n)}},{key:"toggle",value:function(){this.hasAttribute("disabled")||(this.expanded=!this.expanded,this.controlledPanel||this._connectPanel(this.getAttribute("aria-controls")),this.controlledPanel?(this.controlledPanel.expanded=this.expanded,this.dispatchEvent(new CustomEvent(h.tag+":change",{detail:{expanded:this.expanded,toggle:this,panel:this.controlledPanel},bubbles:!0}))):console.warn(this.tag+": This toggle doesn't have a panel associated with it"))}},{key:"_clickHandler",value:function(){this.toggle()}},{key:"_keydownHandler",value:function(e){switch(e.key){case" ":case"Spacebar":case"Enter":this.toggle()}}},{key:"_connectPanel",value:function(e){this.getRootNode?this.controlledPanel=this.getRootNode().querySelector("#"+e):this.controlledPanel=document.querySelector("#"+e)}}]),d);function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.setTabIndex,i=void 0===n||n,a=t.addKeydownHandler,o=void 0===a||a;l(this,d);var r=s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e||d));return r.controlledPanel=!1,r._setTabIndex=i,r._addKeydownHandler=o,r.addEventListener("click",r._clickHandler),o&&r.addEventListener("keydown",r._keydownHandler),r}var u=(a(p,t),n(p,[{key:"html",get:function(){return"<style>:host{display:none;overflow:hidden;will-change:height}:host([pfe-expanded]){display:block;position:relative}:host(.animating){display:block;-webkit-transition:height .3s ease-in-out;transition:height .3s ease-in-out}</style><slot></slot>"}},{key:"templateUrl",get:function(){return"pfe-collapse-panel.html"}},{key:"styleUrl",get:function(){return"pfe-collapse-panel.scss"}},{key:"pfeId",get:function(){return this.getAttribute("pfe-id")},set:function(e){e&&this.setAttribute("pfe-id",e)}},{key:"animates",get:function(){return"false"!==this.getAttribute("pfe-animation")}},{key:"expanded",get:function(){return this.hasAttribute("pfe-expanded")},set:function(e){if(Boolean(e)){if(this.setAttribute("pfe-expanded",""),this.animates){var t=this.getBoundingClientRect().height;this._fireAnimationEvent("opening"),this._animate(0,t)}}else if(this.hasAttribute("pfe-expanded")){var n=this.getBoundingClientRect().height;this.removeAttribute("pfe-expanded"),this.animates&&(this._fireAnimationEvent("closing"),this._animate(n,0))}}}],[{key:"version",get:function(){return"1.0.0-prerelease.24"}},{key:"properties",get:function(){return{}}},{key:"slots",get:function(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function(){return"pfe-collapse-panel"}}]),n(p,[{key:"connectedCallback",value:function(){r(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"connectedCallback",this).call(this),this.expanded=!1,this.id&&(this.pfeId=this.id);var e=p.tag+"-"+o();this.id||(this.id=e),this.pfeId||(this.pfeId=e)}},{key:"_animate",value:function(e,t){var n=this;this.classList.add("animating"),this.style.height=e+"px",requestAnimationFrame(function(){requestAnimationFrame(function(){n.style.height=t+"px",n.classList.add("animating"),n.addEventListener("transitionend",n._transitionEndHandler)})})}},{key:"_transitionEndHandler",value:function(e){e.target.style.height="",e.target.classList.remove("animating"),e.target.removeEventListener("transitionend",this._transitionEndHandler),this.dispatchEvent(new CustomEvent(p.tag+":animation-end",{detail:{expanded:this.expanded,panel:this},bubbles:!0}))}},{key:"_fireAnimationEvent",value:function(e){this.dispatchEvent(new CustomEvent(p.tag+":animation-start",{detail:{state:e,panel:this},bubbles:!0}))}}]),p);function p(e){return l(this,p),s(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e||p))}var h=(a(f,t),n(f,[{key:"html",get:function(){return"<style>:host{display:block}:host([hidden]){display:none}:host(.animating),:host([expanded]){display:block}</style><slot></slot>"}},{key:"templateUrl",get:function(){return"pfe-collapse.html"}},{key:"styleUrl",get:function(){return"pfe-collapse.scss"}},{key:"schemaUrl",get:function(){return"pfe-collapse.json"}},{key:"animates",get:function(){return"false"!==this.getAttribute("pfe-animation")}}],[{key:"version",get:function(){return"1.0.0-prerelease.24"}},{key:"properties",get:function(){return{}}},{key:"slots",get:function(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function(){return"pfe-collapse"}},{key:"observedAttributes",get:function(){return["pfe-animation"]}}]),n(f,[{key:"connectedCallback",value:function(){var e=this;r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"connectedCallback",this).call(this),Promise.all([customElements.whenDefined(u.tag),customElements.whenDefined(c.tag)]).then(function(){e.children.length&&e._linkControls(),e._observer.observe(e,{childList:!0})})}},{key:"disconnectedCallback",value:function(){this.removeEventListener(f.tag+":change",this._changeHandler),this.removeEventListener(u.tag+":animation-start",this._animationStartHandler),this.removeEventListener(u.tag+":animation-end",this._animationEndHandler),this._observer.disconnect()}},{key:"attributeChangedCallback",value:function(e,t,n){r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"attributeChangedCallback",this).call(this,e,t,n),n&&("false"!==n&&"true"!==n||this._panel&&this._panel.setAttribute("pfe-animation",n))}},{key:"toggle",value:function(){this._toggle.toggle()}},{key:"_linkControls",value:function(){this._toggle=this.querySelector(c.tag),this._panel=this.querySelector(u.tag),this._toggle.setAttribute("aria-controls",this._panel.pfeId)}},{key:"_animationStartHandler",value:function(){this.classList.add("animating")}},{key:"_animationEndHandler",value:function(){this.classList.remove("animating")}},{key:"_changeHandler",value:function(e){}}]),f);function f(e){l(this,f);var t=s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e||f));return t._toggle=null,t._panel=null,t._linkControls=t._linkControls.bind(t),t._changeHandler=t._changeHandler.bind(t),t._observer=new MutationObserver(t._linkControls),t.addEventListener(f.tag+":change",t._changeHandler),t.addEventListener(u.tag+":animation-start",t._animationStartHandler),t.addEventListener(u.tag+":animation-end",t._animationEndHandler),t}t.create(h),t.create(c),t.create(u),e.PfeCollapse=h,e.PfeCollapseToggle=c,e.PfeCollapsePanel=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pfe-collapse.umd.min.js.map
