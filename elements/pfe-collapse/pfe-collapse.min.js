import t from"../pfelement/pfelement.min.js";
/*!
 * PatternFly Elements: PfeCollapse 1.0.0-prerelease.24
 * @license
 * Copyright 2019 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/function e(){return Math.random().toString(36).substr(2,9)}class n extends t{static get version(){return"1.0.0-prerelease.24"}get html(){return"<style>:host{display:block;cursor:default}</style><slot></slot>"}static get properties(){return{}}static get slots(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}static get tag(){return"pfe-collapse-toggle"}get templateUrl(){return"pfe-collapse-toggle.html"}get styleUrl(){return"pfe-collapse-toggle.scss"}get pfeId(){return this.getAttribute("pfe-id")}set pfeId(t){t&&this.setAttribute("pfe-id",t)}get expanded(){return"true"===this.getAttribute("aria-expanded")}set expanded(t){const e=Boolean(t);this.setAttribute("aria-expanded",e)}static get observedAttributes(){return["aria-controls"]}constructor(t,{setTabIndex:e=!0,addKeydownHandler:i=!0}={}){super(t||n),this.controlledPanel=!1,this._setTabIndex=e,this._addKeydownHandler=i,this.addEventListener("click",this._clickHandler),i&&this.addEventListener("keydown",this._keydownHandler)}connectedCallback(){super.connectedCallback(),this.expanded=!1,this.id&&(this.pfeId=this.id);const t=`${n.tag}-${e()}`;this.id||(this.id=t),this.pfeId||(this.pfeId=t),this.setAttribute("role","button"),this._setTabIndex&&this.setAttribute("tabindex",0),this.controlledPanel||this._connectPanel(this.getAttribute("aria-controls"))}disconnectedCallback(){this.removeEventListener("click",this._clickHandler),this._addKeydownHandler&&this.removeEventListener("keydown",this._keydownHandler)}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),n&&this._connectPanel(n)}toggle(){this.hasAttribute("disabled")||(this.expanded=!this.expanded,this.controlledPanel||this._connectPanel(this.getAttribute("aria-controls")),this.controlledPanel?(this.controlledPanel.expanded=this.expanded,this.dispatchEvent(new CustomEvent(`${s.tag}:change`,{detail:{expanded:this.expanded,toggle:this,panel:this.controlledPanel},bubbles:!0}))):console.warn(`${this.tag}: This toggle doesn't have a panel associated with it`))}_clickHandler(){this.toggle()}_keydownHandler(t){switch(t.key){case" ":case"Spacebar":case"Enter":this.toggle()}}_connectPanel(t){this.getRootNode?this.controlledPanel=this.getRootNode().querySelector(`#${t}`):this.controlledPanel=document.querySelector(`#${t}`)}}class i extends t{static get version(){return"1.0.0-prerelease.24"}get html(){return"<style>:host{display:none;overflow:hidden;will-change:height}:host([pfe-expanded]){display:block;position:relative}:host(.animating){display:block;-webkit-transition:height .3s ease-in-out;transition:height .3s ease-in-out}</style><slot></slot>"}static get properties(){return{}}static get slots(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}static get tag(){return"pfe-collapse-panel"}get templateUrl(){return"pfe-collapse-panel.html"}get styleUrl(){return"pfe-collapse-panel.scss"}get pfeId(){return this.getAttribute("pfe-id")}set pfeId(t){t&&this.setAttribute("pfe-id",t)}get animates(){return"false"!==this.getAttribute("pfe-animation")}get expanded(){return this.hasAttribute("pfe-expanded")}set expanded(t){if(Boolean(t)){if(this.setAttribute("pfe-expanded",""),this.animates){const t=this.getBoundingClientRect().height;this._fireAnimationEvent("opening"),this._animate(0,t)}}else if(this.hasAttribute("pfe-expanded")){const t=this.getBoundingClientRect().height;this.removeAttribute("pfe-expanded"),this.animates&&(this._fireAnimationEvent("closing"),this._animate(t,0))}}constructor(t){super(t||i)}connectedCallback(){super.connectedCallback(),this.expanded=!1,this.id&&(this.pfeId=this.id);const t=`${i.tag}-${e()}`;this.id||(this.id=t),this.pfeId||(this.pfeId=t)}_animate(t,e){this.classList.add("animating"),this.style.height=`${t}px`,requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.style.height=`${e}px`,this.classList.add("animating"),this.addEventListener("transitionend",this._transitionEndHandler)})})}_transitionEndHandler(t){t.target.style.height="",t.target.classList.remove("animating"),t.target.removeEventListener("transitionend",this._transitionEndHandler),this.dispatchEvent(new CustomEvent(`${i.tag}:animation-end`,{detail:{expanded:this.expanded,panel:this},bubbles:!0}))}_fireAnimationEvent(t){this.dispatchEvent(new CustomEvent(`${i.tag}:animation-start`,{detail:{state:t,panel:this},bubbles:!0}))}}class s extends t{static get version(){return"1.0.0-prerelease.24"}get html(){return"<style>:host{display:block}:host([hidden]){display:none}:host(.animating),:host([expanded]){display:block}</style><slot></slot>"}static get properties(){return{}}static get slots(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}static get tag(){return"pfe-collapse"}get templateUrl(){return"pfe-collapse.html"}get styleUrl(){return"pfe-collapse.scss"}get schemaUrl(){return"pfe-collapse.json"}get animates(){return"false"!==this.getAttribute("pfe-animation")}static get observedAttributes(){return["pfe-animation"]}constructor(t){super(t||s),this._toggle=null,this._panel=null,this._linkControls=this._linkControls.bind(this),this._changeHandler=this._changeHandler.bind(this),this._observer=new MutationObserver(this._linkControls),this.addEventListener(`${s.tag}:change`,this._changeHandler),this.addEventListener(`${i.tag}:animation-start`,this._animationStartHandler),this.addEventListener(`${i.tag}:animation-end`,this._animationEndHandler)}connectedCallback(){super.connectedCallback(),Promise.all([customElements.whenDefined(i.tag),customElements.whenDefined(n.tag)]).then(()=>{this.children.length&&this._linkControls(),this._observer.observe(this,{childList:!0})})}disconnectedCallback(){this.removeEventListener(`${s.tag}:change`,this._changeHandler),this.removeEventListener(`${i.tag}:animation-start`,this._animationStartHandler),this.removeEventListener(`${i.tag}:animation-end`,this._animationEndHandler),this._observer.disconnect()}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),n&&("false"!==n&&"true"!==n||this._panel&&this._panel.setAttribute("pfe-animation",n))}toggle(){this._toggle.toggle()}_linkControls(){this._toggle=this.querySelector(n.tag),this._panel=this.querySelector(i.tag),this._toggle.setAttribute("aria-controls",this._panel.pfeId)}_animationStartHandler(){this.classList.add("animating")}_animationEndHandler(){this.classList.remove("animating")}_changeHandler(t){}}t.create(s),t.create(n),t.create(i);export{s as PfeCollapse,n as PfeCollapseToggle,i as PfeCollapsePanel};
//# sourceMappingURL=pfe-collapse.min.js.map
